# Итоговый проект Python

Само задание можно псотмреть в фале "[ТЗ_проекта.md](ТЗ_проекта.md)"

1. Так как таблица в БД создаётся один раз, а данные потом просто заносятся в неё, то было решено создать её через DBeaver:

   ```pgsql
   CREATE TABLE IF NOT EXISTS users (
       user_id VARCHAR NOT NULL,
       oauth_consumer_key VARCHAR NOT NULL,
       lis_result_sourcedid VARCHAR,
       lis_outcome_service_url VARCHAR,
       is_correct VARCHAR(1),  -- Например, "1"/"0" или Null
       attempt_type VARCHAR(6), -- Например, "run"/"submit"
       created_at TIMESTAMP
   );
   ```
2. Для подключения к локальной БД используется класс `ConnectDB`, который является синлтоном.
3. Для загрузки данных черех `API` создал отдельный класс `APIClient`, в котором есть функция `fetch_data` формирующая данный с список из словарей с данными.
4. Удаление старых логов происходит через функцию `delete_old_log(days=3,folder='.')`. Вообще, функция удаляет любые файлы с расширением `.log` в указанных в параметрах директории `folder` и старше `days` дней.
5. Подключение к Я.Диску сделано через класс `YandexDisk`. В котором есть метод `report`, принимающий на вход `имя файла` и сохраняющй его в файл `/python/Отчёт.xlsx` на Я.Диске.
6. Отчёт формируется автоматически и доступен по [ссылке](https://disk.yandex.ru/i/dqu9f-5ijZLzjQ).
7. Реализована функция отправки сообщения об окончании работы алгоритма по электронной почте.
8. Пароли для доступа к Я.Диску и E-mail находятся в файлах локально, без выгрузки в репозиторий.
