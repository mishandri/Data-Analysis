Данный кейс почти в неизменном виде предоставлялся в качестве тестового задания на позицию **продуктового аналитика** в компанию **Самокат**.

## Описание данных

Таблица `products`:

1. `product_id` - id товара
2. `level1` - категория
3. `level2` - подкатегория
4. `name` - наименование товара

Таблица `orders`:

1. `order_id` - номер чека
2. `accepted_at` - дата и время чека
3. `product_id` - id товара
4. `quantity` - кол-во товара в чеке
5. `regular_price` - регулярная цена
6. `price` - текущая цена
7. `cost_price` - закупочная цена

## Задания

### Самая ходовая товарная группа

По какой категории товаров продано больше всего позиций?

1. Подкрепите свой ответ таблицей, в которой рассчитано количество проданных штук товара в каждой товарной категории.
2. Дополнительно постройте на основании этой таблицы `barchart`.
3. Проверьте, чтобы все подписи на вашем графике выглядели читаемо и понятно. Этот график должен быть сходу понятен стороннему наблюдателю.

### Распределение продаж по подкатегориям

Оцените распределение количества проданных позиций в каждой товарной категории (`level1`) по подкатегориям (`level2`). Проиллюстрируйте свой результат расчетной таблицей.

### Найти средний чек в заданную дату

Какой средний чек был 13.01.2022?

### Доля промо в заданной категории

Когда товар продается по промо-акции, его базовая цена не совпадает с фактической ценой.

Вам необходимо:

1. Посчитать, какую долю от общих продаж категории `Сыры` занимают промо (в штуках)
2. Построить пайчарт, который это проиллюстрирует. На графике должны быть видны группы, соответствующие доли и понятные подписи к ним.

### Посчитать маржу по категориям

Нужно посчитать маржу:

1. В рублях
2. В `%`

Сделать это нужно по всем категориям `level1` и отобразить с помощью 2 горизонтальных барчартов. Все подписи должны быть читаемыми и понятными.

### ABC анализ

1. Сделайте ABC-анализ продаж по количеству
2. Сделайте ABC-анализ по сумме продаж
3. Сделайте новый столбец, в котором будет итоговая группа на основании двух анализов. Например: `A C`.

**Важно:** предлагаем провести ABC-анализ **по подкатегориям**, а не по отдельным товарам. Имеющихся у нас данных за небольшой период недостаточно для качественного анализа на уровне товаров. К тому же, количество товаров слишком велико, что может также исказить результаты. А ABC-анализ по подкатегориям даст более адекватную и интерпретируемую картину.

**Дополнительно:** Во всех заданиях (кроме расчета среднего чека) можно пренебречь товарами, которые указаны в orders, но отсутствуют в products.
